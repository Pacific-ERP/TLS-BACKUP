<?xml version="1.0" encoding="utf-8" ?>
<odoo><data>
    
<!-- rend visible champs pour groups donner -->
<record id="revatua_stock_picking_form" model="ir.ui.view">
    <field name="name">Pacific-ERP stock.picking : pe_revatua (form)</field>
    <field name="model">stock.picking</field>
    <field name="inherit_id" ref="stock.view_picking_form" />
    <field name="groups_id" eval="[(6, 0, [ref('pe_revatua.group_revatua_users') ])]"/>
    <field name="arch" type="xml">
    <!-- Formulaire -->
        <!-- Coche Revatua -->
        <xpath expr="//page[@name='extra']//field[@name='company_id']" position="after">
            <field name="revatua_ck" groups="base.group_no_one"/>
        </xpath>
        <!-- Date de voyage -->
        <xpath expr="//field[@name='location_id']" position="after">
            <field name="travel_date" attrs="{'invisible': [('revatua_ck', '=', False)]}"/>
        </xpath>
        <!-- Champ recup/destinataire -->
        <xpath expr="//field[@name='owner_id']/../.." position="after">
            <group name="detail_livraison" attrs="{'invisible': [('revatua_ck', '=', False)]}">
                <group name="lieu_recuperation" string="Lieu de récupération">
                    <field name="commune_recup"/>
                    <field name="ile_recup"/>
                    <field name="contact_expediteur"/>
                    <field name="tel_expediteur" attrs="{&quot;invisible&quot;: [&quot;&amp;&quot;,[&quot;tel_expediteur&quot;,&quot;=&quot;,False],[&quot;mobil_expediteur&quot;,&quot;!=&quot;,False]]}"/>
                    <field name="mobil_expediteur" attrs="{&quot;invisible&quot;: [&quot;|&quot;,[&quot;tel_expediteur&quot;,&quot;!=&quot;,False],[&quot;mobil_expediteur&quot;,&quot;=&quot;,False]]}"/>
                </group>
                <group name="lieu_destinataire" string="Destinataire" attrs="{&quot;invisible&quot;: [[&quot;commune_dest&quot;,&quot;=&quot;,False]]}">
                    <field name="commune_dest"/>
                    <field name="ile_dest"/>
                    <field name="contact_dest"/>
                    <field name="tel_dest" attrs="{&quot;invisible&quot;: [&quot;&amp;&quot;,[&quot;tel_dest&quot;,&quot;=&quot;,False],[&quot;mobil_dest&quot;,&quot;!=&quot;,False]]}"/>
                    <field name="mobil_dest" attrs="{&quot;invisible&quot;: [&quot;|&quot;,[&quot;tel_dest&quot;,&quot;!=&quot;,False],[&quot;mobil_dest&quot;,&quot;=&quot;,False]]}"/>
                </group>
            </group>
        </xpath>
        <!-- Lien Commandes (Autres informations) -->
        <xpath expr="//field[@name='carrier_id']" position="after">
            <field name="sale_id" attrs="{'invisible': [('revatua_ck', '=', False)]}"/>
        </xpath>
    <!-- Opérations -->
        <xpath expr="//form[1]/sheet[1]/notebook[1]/page[@name='operations']/field[@name='move_ids_without_package']/tree[1]/field[@name='product_uom_qty']" position="before">
            <field name="r_volume" optional="show" string="Vol(m³)" attrs="{'column_invisible': [('parent.revatua_ck', '=', False)]}"/>
            <field name="r_weight" optional="show" string="Poid(T)" attrs="{'column_invisible': [('parent.revatua_ck', '=', False)]}"/>
        </xpath>
        <xpath expr="//form[1]/sheet[1]/notebook[1]/page[@name='operations']/field[@name='move_ids_without_package']/tree[1]/field[@name='product_uom_qty']" position="after">
            <field name="sale_line_id" optional="hide"/>
            <field name="tarif_maritime" optional="hide"/>
            <field name="tarif_terrestre" optional="hide"/>
            <field name="tarif_rpa" optional="hide"/>
        </xpath>
        <xpath expr="//form[1]/sheet[1]/notebook[1]/page[@name='operations']/field[@name='move_ids_without_package']/tree[1]/field[@name='product_uom']" position="attributes">
            <attribute name="attrs">{"readonly": [["state","!=","draft"],["additional","=",False]]}</attribute>
            <attribute name="invisible">1</attribute>
        </xpath>
    </field></record>

</data></odoo>